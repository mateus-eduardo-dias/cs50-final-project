<%- include('layouts/header.ejs') %>
    <script>
        const userInfo = <%- JSON.stringify(profileInfo) %>
    </script>
    <main>
        <div class="text-center mt-3 fw-bold fs-4 font-monospace"><%= profileInfo.username %>'s Profile</div>
        <div class="text-center fst-italic font-monospace">#<%= profileInfo.id %></div>
        <div class="text-center">Playing since <%= (new Intl.DateTimeFormat('en-US', {'dateStyle':'long'})).format(profileInfo.created_at) %></div>
        <hr>
        <div class="container-xxl my-4">
            <div class="row">
                <div class="font-monospace fs-5">Quizzes created</div>
            </div>
            <div class="row row-cols-auto" id="user-quizzes-row">
            </div>
            <div class="text-center fs-2">
                <i class="bi bi-plus-circle add-btn" id="loadUserQuizzesBtn" onclick="loadUserQuizzes()"></i>
            </div>
        </div>
        <hr>
        <div class="container-xxl my-4">
            <div class="row">
                <div class="font-monospace fs-5">Played recently</div>
            </div>
            <div class="row row-cols-auto" id="user-history-row">
            </div>
            <div class="text-center fs-2">
                <i class="bi bi-plus-circle add-btn" id="loadUserHistoryBtn" onclick="loadUserHistory()"></i>
            </div>
        </div>
        <div class="modal fade" tabindex="-1" id="infoModal">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalTitle"></h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p id="modalMsg"></p>
                        <label id="passwordInputLabel">Type your password to confirm</label>
                        <input id="passwordInput" class="form-control" for="passwordInputLabel">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary btn-schema-1" data-bs-dismiss="modal" onclick="deleteQuiz()">Delete</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" tabindex="-1" id="errorModal">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Error</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p id="errorModalMsg"></p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" tabindex="-1" id="successModal">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Success</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p id="successModalMsg"></p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="window.location = window.location">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script src="/js/quizElement.js"></script>
    <script src="/js/profile.js"></script>
<%- include('layouts/footer.ejs') %>